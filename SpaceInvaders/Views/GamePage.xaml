<Page x:Class="SpaceInvaders.Views.GamePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:converters="using:SpaceInvaders.Views.Converters"
      xmlns:views="clr-namespace:SpaceInvaders.Views"
      Background="#000011"
      Loaded="Page_Loaded"
      Unloaded="Page_Unloaded"
      KeyDown="Page_KeyDown"
      KeyUp="Page_KeyUp"
      IsTabStop="True">

    <Page.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converters:EnemyTypeToImageConverter x:Key="EnemyTypeToImageConverter"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
        <views:PauseButtonTextConverter x:Key="PauseButtonTextConverter"/>
    </Page.Resources>

    <Grid>

        <!-- CAMADA 0: Background -->
        <Image Source="/Assets/Images/background.jpg"
               Stretch="UniformToFill"
               Opacity="0.3"/>

        <!-- CAMADA 1: Game Canvas -->
        <Canvas x:Name="GameCanvas"
                Width="800"
                Height="600"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                >

            <!-- Player -->
            <Rectangle x:Name="PlayerRect"
                      Width="50" Height="30"
                      Canvas.Left="375" Canvas.Top="550"
                      Visibility="Visible"/>

            <!-- Enemies Container -->
            <Canvas x:Name="EnemiesCanvas"/>

            <!-- Red Enemy -->
            <Rectangle x:Name="RedEnemyRect"
                      Width="40" Height="30"
                      Visibility="Collapsed"/>

            <!-- Bullets Container -->
            <Canvas x:Name="BulletsCanvas"/>

            <!-- Shields Container -->
            <Canvas x:Name="ShieldsCanvas"/>

        </Canvas>

        <!-- CAMADA 2: HUD Superior -->
        <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Margin="20,10,0,0"
                    Spacing="30">
            <TextBlock x:Name="ScoreText"
                       Text="SCORE: 0000"
                       Foreground="#FFFFFF"
                       FontSize="16"
                       FontFamily="Consolas"/>
            <TextBlock x:Name="LivesText"
                       Text="LIVES: 3"
                       Foreground="#FFFFFF"
                       FontSize="16"
                       FontFamily="Consolas"/>
            <TextBlock x:Name="LevelText"
                       Text="LEVEL: 1"
                       Foreground="#FFFFFF"
                       FontSize="16"
                       FontFamily="Consolas"/>
        </StackPanel>

        <!-- CAMADA 3: Overlay de Pause -->
        <Border x:Name="PauseOverlay"
                Background="#80000000"
                Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="GAME PAUSED"
                          Foreground="#FFFFFF"
                          FontSize="48"
                          FontWeight="Bold"
                          HorizontalAlignment="Center"/>
                <TextBlock Text="Press P to continue"
                          Foreground="#AAAAAA"
                          FontSize="18"
                          HorizontalAlignment="Center"
                          Margin="0,10"/>
            </StackPanel>
        </Border>

        <!-- CAMADA 4: Overlay de Game Over -->
        <Border x:Name="GameOverOverlay"
                Background="#80000000"
                Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="20">
                <TextBlock Text="GAME OVER"
                          Foreground="#FF4444"
                          FontSize="48"
                          FontWeight="Bold"
                          HorizontalAlignment="Center"/>
                <TextBlock x:Name="FinalScoreText"
                          Text="FINAL SCORE: 0000"
                          Foreground="#FFFFFF"
                          FontSize="24"
                          HorizontalAlignment="Center"/>
                <Button x:Name="RestartButton"
                        Content="PLAY AGAIN"
                        Click="RestartButton_Click"
                        Width="200" Height="50"
                        FontSize="16"/>
                <Button x:Name="MenuButton"
                        Content="MAIN MENU"
                        Click="MenuButton_Click"
                        Width="200" Height="50"
                        FontSize="16"/>
            </StackPanel>
        </Border>

        <!-- CAMADA 5: Controles (canto inferior direito) -->
        <StackPanel VerticalAlignment="Bottom"
                    HorizontalAlignment="Right"
                    Margin="20"
                    Spacing="10">
            <TextBlock Text="Controls:" Foreground="#AAAAAA" FontSize="12"/>
            <TextBlock Text="← → Move" Foreground="#AAAAAA" FontSize="10"/>
            <TextBlock Text="SPACE Shoot" Foreground="#AAAAAA" FontSize="10"/>
        </StackPanel>

    </Grid>
</Page>
